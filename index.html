<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Laura Urbina - Trenzas</title>
    <link rel="apple-touch-icon" href="Gemini_Generated_Image_h92t8ah92t8ah92t.png">
    <link rel="icon" type="image/png" href="Gemini_Generated_Image_h92t8ah92t8ah92t.png">
    <link rel="manifest" href="manifest.json">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div id="splash">
        <img src="Gemini_Generated_Image_h92t8ah92t8ah92t.png" alt="Logo">
        <h2>Laura Urbina</h2>
    </div>

    <header>
        <h1>Laura Urbina</h1>
        <nav>
            <button onclick="showSection('form')">Nueva</button>
            <button onclick="showSection('list')">Agenda</button>
            <button onclick="showSection('calendario')">Calendario</button>
            <button onclick="showSection('resumen')">Corte</button>
        </nav>
    </header>

    <main>
        <section id="sec-form">
            <div class="card">
                <h2>Registrar Cita</h2>
                <form id="appointment-form">
                    <input type="text" id="clientName" placeholder="Nombre de la clienta" required>
                    <select id="serviceType" onchange="updatePaymentInfo()">
                        <option value="trenzas">Trenzas / Aplicación ($250)</option>
                        <option value="retiro">Retiro ($175)</option>
                        <option value="peinado">Peinado (Variable)</option>
                    </select>
                    
                    <div id="manual-payment-div" class="hidden">
                        <input type="number" id="manualPay" placeholder="Pago para Emma/Say $" oninput="updatePaymentInfo()">
                    </div>

                    <div class="checkbox-group">
                        <label><input type="checkbox" id="emma" checked onchange="updatePaymentInfo()"> Emma</label>
                        <label><input type="checkbox" id="say" checked onchange="updatePaymentInfo()"> Say</label>
                    </div>

                    <input type="datetime-local" id="appointmentDate" required>
                    
                    <input type="number" id="totalCost" placeholder="Costo Total $" required oninput="calcularRestante()">
                    <input type="number" id="anticipo" placeholder="Anticipo (Depósito) $" oninput="calcularRestante()">
                    
                    <div id="restante-preview" style="background: #eef2f7; padding: 10px; border-radius: 10px; text-align: center; margin-bottom: 12px; border: 1px solid #3498db;">
                        <p style="margin:0; font-weight:bold; color: #2980b9;">Falta por pagar: <span id="monto-restante">$0</span></p>
                    </div>

                    <select id="status">
                        <option value="pendiente">Pendiente (Apartado)</option>
                        <option value="atendida">Atendida (Cerrada)</option>
                    </select>

                    <div id="payment-preview">
                        <p>A Emma: <span id="pay-emma">$250</span></p>
                        <p>A Say: <span id="pay-say">$250</span></p>
                    </div>

                    <button type="submit" class="btn-save">Guardar Cita</button>
                </form>
            </div>
        </section>

        <section id="sec-list" class="hidden">
            <div class="card">
                <h2>Agenda de Citas</h2>
                <div id="appointments-container"></div>
            </div>
        </section>

        <section id="sec-calendario" class="hidden"><div class="card"><div id="calendar"></div></div></section>

        <section id="sec-resumen" class="hidden">
            <div class="tabs-corte">
                <button class="btn-tab" onclick="calculateCorte('dia')">Hoy</button>
                <button class="btn-tab" onclick="calculateCorte('mes')">Mes</button>
            </div>
            <div class="stats-grid">
                <div class="stat-card"><h3 id="corte-titulo">Corte</h3><p id="total-ventas" class="monto">$0</p></div>
                <div class="stat-card" style="border-bottom-color: orange;"><h3>Por Cobrar</h3><p id="total-pendiente" class="monto" style="color: orange;">$0</p></div>
                <div class="stat-card"><h3>Emma</h3><p id="total-emma" class="monto">$0</p></div>
                <div class="stat-card"><h3>Say</h3><p id="total-say" class="monto">$0</p></div>
            </div>
            <button class="btn-finalizar" onclick="exportarReporte()">Copiar Reporte WhatsApp</button>
        </section>
    </main>

    <script type="module" src="app.js"></script>
</body>
</html>
